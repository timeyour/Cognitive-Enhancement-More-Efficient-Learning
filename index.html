<!DOCTYPE html>
<html lang="zh-CN" class="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>è®¤çŸ¥æå‡ Â· å­¦ä¹ æ›´é«˜æ•ˆï¼ˆæ€»å†³èµ›ç‰ˆï¼‰</title>
  <meta name="description" content="èµ„æºâ†’è®¡åˆ’â†’æµ‹è¯•â†’æ•™ç»ƒâ†’æŠ½ç‰Œé—­ç¯ï¼Œç¦»çº¿å¯ç”¨ã€‚åˆ›æ–°æ€§ã€å®Œæ•´æ€§ã€è½åœ°å¯è¡Œæ€§ä¸ç¤¾ä¼šä»·å€¼å…¼é¡¾ã€‚">
  <!-- ====== æ ·å¼ï¼ˆåŸ style.css å†…åµŒï¼‰ ====== -->
  <style>
  :root{--bg:#0b0c0f;--fg:#e9eaee;--muted:#a7abba;--card:#12141a;--accent:#6aa3ff;--accent2:#5b8cff;--border:#23262d;--shadow:0 8px 30px rgba(0,0,0,.35)}
  :root.light{--bg:#f7f8fb;--fg:#16181d;--muted:#6b707b;--card:#ffffff;--accent:#3b6cff;--accent2:#5a7cff;--border:#e6e8ef;--shadow:0 12px 28px rgba(20,35,80,.12)}
  *{box-sizing:border-box}html,body{margin:0;padding:0}html{scroll-behavior:smooth}
  body{background:var(--bg);color:var(--fg);font:16px/1.65 system-ui,-apple-system,Segoe UI,Roboto,PingFang SC,Helvetica,Arial}
  .container{width:min(1120px,92%);margin:0 auto}
  .site-header{position:sticky;top:0;z-index:20;background:color-mix(in oklab,var(--bg) 90%,transparent);backdrop-filter:blur(10px);border-bottom:1px solid var(--border)}
  .nav{display:flex;align-items:center;justify-content:space-between;height:64px}
  .brand{color:var(--fg);font-weight:800;text-decoration:none}.brand .dot{color:var(--accent)}
  nav a{color:var(--muted);text-decoration:none;margin:0 12px;font-size:14px}
  nav a:hover{color:var(--fg)}
  .icon-btn{background:transparent;border:1px solid var(--border);color:var(--fg);padding:8px 12px;border-radius:12px;cursor:pointer}
  .hero{padding:84px 0 48px;border-bottom:1px solid var(--border)}
  .hero-inner h1{font-size:clamp(28px,4.6vw,46px);margin:0 0 10px}
  .subtitle{color:var(--muted);margin:0 0 20px;max-width:720px}
  .btn{background:linear-gradient(90deg,var(--accent),var(--accent2));color:#fff;border:0;border-radius:12px;padding:12px 18px;cursor:pointer;text-decoration:none;box-shadow:0 6px 16px rgba(84,120,255,.25)}
  .btn.ghost{background:transparent;border:1px solid var(--border);color:var(--fg)}
  .cta-row{display:flex;gap:12px;flex-wrap:wrap}.meta{color:var(--muted);margin-top:10px}
  .section{padding:64px 0}.section.alt{background:var(--card)}
  .sec-title{margin:0 0 18px;font-size:22px}
  .cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px}
  .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:16px;box-shadow:var(--shadow)}
  .muted{color:var(--muted)}
  .filter-row{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:10px}
  .filter-row input,.filter-row select{padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:transparent;color:var(--fg)}
  .res-title{font-weight:700;margin:0 0 6px}
  .res-tags{color:var(--muted);font-size:12px;margin-bottom:8px}
  .res-actions{display:flex;gap:8px;flex-wrap:wrap}
  .plan-wrap{border:1px solid var(--border);border-radius:14px;padding:14px;background:color-mix(in oklab,var(--bg) 96%,transparent)}
  .plan-head{display:grid;gap:8px}
  .plan-bar{height:10px;background:color-mix(in oklab,var(--card) 86%,transparent);border:1px solid var(--border);border-radius:999px;overflow:hidden}
  .plan-bar span{display:block;height:100%;background:linear-gradient(90deg,var(--accent),var(--accent2))}
  .plan-meta{display:flex;justify-content:space-between;color:var(--muted);font-size:14px}
  .plan-list{list-style:none;margin:8px 0 0;padding:0;display:grid;gap:10px}
  .plan-item{display:flex;align-items:center;justify-content:space-between;border:1px solid var(--border);border-radius:12px;padding:10px 12px;background:var(--card)}
  .badge{font-size:12px;color:var(--muted)}
  .quiz .q{margin:10px 0}.quiz .q h4{margin:0 0 6px}
  .quiz-result{margin-top:8px;border:1px solid var(--border);border-radius:12px;padding:10px;background:var(--card)}
  .coach-out{margin-top:8px;color:var(--muted)}
  .cards-deck{display:grid;gap:14px}
  .flashcard{perspective:1200px;height:240px;border-radius:16px}
  .flashcard-inner{position:relative;width:100%;height:100%;transform-style:preserve-3d;transition:transform .5s ease}
  .flashcard.flipped .flashcard-inner{transform:rotateY(180deg)}
  .face{position:absolute;inset:0;padding:18px;border-radius:16px;border:1px solid var(--border);background:var(--card);box-shadow:var(--shadow);backface-visibility:hidden;display:flex;align-items:center;justify-content:center;text-align:center}
  .face.back{transform:rotateY(180deg)}
  .deck-controls{display:flex;gap:10px;flex-wrap:wrap}
  .deck-progress .bar{height:10px;background:var(--card);border:1px solid var(--border);border-radius:999px;overflow:hidden}
  .deck-progress .bar span{display:block;height:100%;background:linear-gradient(90deg,var(--accent),var(--accent2))}
  .deck-progress .nums{color:var(--muted);font-size:14px;margin-top:6px}
  .form{margin-top:8px}.row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  label{display:grid;gap:6px;font-size:14px;color:var(--muted)}
  textarea,input{padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:transparent;color:var(--fg)}
  .form-msg{margin-top:8px;color:var(--muted)}
  .site-footer{border-top:1px solid var(--border);padding:24px 0;text-align:center;color:var(--muted)}
  @media (max-width:860px){nav{display:none}.row{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container nav">
      <a class="brand" href="#hero">è®¤çŸ¥æå‡<span class="dot">.</span></a>
      <nav aria-label="ä¸»å¯¼èˆª">
        <a href="#resources">å­¦ä¹ èµ„æº</a>
        <a href="#interact">äº’åŠ¨åŒº</a>
        <a href="#contact">è”ç³»</a>
      </nav>
      <button id="themeToggle" class="icon-btn" aria-label="åˆ‡æ¢æ·±æµ…è‰²">ğŸŒ“</button>
    </div>
  </header>

  <main>
    <!-- Hero -->
    <section id="hero" class="hero">
      <div class="container hero-inner">
        <h1>è®¤çŸ¥æå‡ Â· å­¦ä¹ æ›´é«˜æ•ˆ</h1>
        <p class="subtitle">
          80% è‡ªå­¦è®¡åˆ’ 7 å¤©å†…æµäº§ï¼Œæˆ‘ä»¬åšäº†ä¸€æ¬¾ <strong>å­¦ä¹ é—­ç¯å·¥å…·</strong>ï¼š
          èµ„æº â†’ è®¡åˆ’ â†’ æµ‹è¯• â†’ æ•™ç»ƒ â†’ æŠ½ç‰Œï¼Œå¸®åŠ©å­¦ä¹ è€…åšæŒç‡æå‡ 30%+ã€‚
        </p>
        <div class="cta-row">
          <a class="btn" href="#resources">å¼€å§‹å­¦ä¹ </a>
          <a class="btn ghost" href="#interact">ç«‹å³äº’åŠ¨</a>
        </div>
        <div class="meta">v1.0 Â· æœ€åæ›´æ–°ï¼š<time id="lastUpdated"></time></div>
      </div>
    </section>

    <!-- å­¦ä¹ èµ„æº + è®¡åˆ’ -->
    <section id="resources" class="section">
      <div class="container">
        <h2 class="sec-title">å­¦ä¹ èµ„æº</h2>
        <p class="muted">ä» 8 æ¡ç²¾é€‰èµ„æºé‡Œå¿«é€ŸæŒ‘é€‰ï¼ŒåŠ å…¥æœ¬å‘¨è®¡åˆ’ï¼›å…¨éƒ¨æ•°æ®æœ¬åœ°ä¿å­˜ã€‚</p>
        <div class="filter-row">
          <label>ç±»å‹
            <select id="filterType">
              <option value="all">å…¨éƒ¨</option>
              <option value="book">ä¹¦</option>
              <option value="article">æ–‡ç« </option>
              <option value="video">è§†é¢‘</option>
              <option value="course">è¯¾ç¨‹</option>
            </select>
          </label>
          <input id="searchInput" placeholder="æœç´¢æ ‡é¢˜/æ ‡ç­¾â€¦" />
        </div>
        <div id="resList" class="cards" aria-live="polite"></div>

        <h2 class="sec-title" style="margin-top:24px">æœ¬å‘¨è®¡åˆ’</h2>
        <div class="plan-wrap">
          <div class="plan-head">
            <div class="plan-bar" aria-label="å®Œæˆè¿›åº¦"><span id="planFill" style="width:0%"></span></div>
            <div class="plan-meta">
              <span>å·²å®Œæˆ <b id="planDone">0</b> / <b id="planTotal">0</b></span>
              <span>è¿ç»­å­¦ä¹  <b id="streak">0</b> å¤©</span>
            </div>
          </div>
          <ul id="planList" class="plan-list"></ul>
          <small class="muted">æç¤ºï¼šè®¡åˆ’æœ€å¤š 3 é¡¹ï¼›å®Œæˆä¼šæ›´æ–°è¿›åº¦ä¸è¿ç»­å¤©æ•°ï¼ˆstreakï¼‰ã€‚</small>
        </div>
      </div>
    </section>

    <!-- äº’åŠ¨åŒºï¼šæµ‹è¯• + æ•™ç»ƒ + æŠ½ç‰Œ -->
    <section id="interact" class="section alt">
      <div class="container">
        <h2 class="sec-title">äº’åŠ¨åŒº</h2>

        <!-- å°æµ‹è¯• -->
        <article class="card">
          <h3>å¿«é€Ÿæµ‹è¯•ï¼ˆ3 é¢˜ï¼‰</h3>
          <form id="quizForm" class="quiz"></form>
          <button class="btn" id="submitQuiz">æäº¤å¹¶æŸ¥çœ‹å»ºè®®</button>
          <div id="quizResult" class="quiz-result" hidden aria-live="polite"></div>
        </article>

        <!-- å­¦ä¹ æ•™ç»ƒ -->
        <article class="card">
          <h3>å­¦ä¹ æ•™ç»ƒï¼ˆè§„åˆ™å¼•æ“ Â· ç¦»çº¿ï¼‰</h3>
          <textarea id="coachInput" rows="3" placeholder="è¯´è¯´ä½ çš„å­¦ä¹ å›°æƒ‘â€¦ï¼ˆå¦‚ï¼šæ‹–å»¶/è®°ä¸ä½/åˆ†å¿ƒ/çœ‹ä¸æ‡‚ï¼‰"></textarea>
          <button class="btn" id="coachBtn">è·å–å»ºè®®</button>
          <div id="coachOut" class="coach-out" aria-live="polite"></div>
        </article>

        <!-- æŠ½ç‰Œ -->
        <article class="card">
          <h3>å­¦ä¹ å¡ç‰‡ Â· æŠ½ç‰Œ</h3>
          <p class="muted">ç‚¹å‡»å¡ç‰‡ç¿»é¢ï¼›é”®ç›˜ <kbd>Space</kbd> ç¿»é¢ï¼Œ<kbd>â†</kbd>/<kbd>â†’</kbd> åˆ¤å®šã€‚</p>
          <div class="cards-deck">
            <div class="flashcard" id="flashcard" tabindex="0" aria-label="å­¦ä¹ å¡ç‰‡">
              <div class="flashcard-inner" id="flashInner">
                <div class="face front" id="cardFront">åŠ è½½ä¸­â€¦</div>
                <div class="face back" id="cardBack">åŠ è½½ä¸­â€¦</div>
              </div>
            </div>
            <div class="deck-controls">
              <button class="btn ghost" id="btnShuffle">æ´—ç‰Œ</button>
              <button class="btn" id="btnAgain">â† å†çœ‹</button>
              <button class="btn" id="btnMaster">â†’ æŒæ¡</button>
            </div>
            <div class="deck-progress">
              <div class="bar" aria-label="æŠ½ç‰Œè¿›åº¦"><span id="barFill" style="width:0%"></span></div>
              <div class="nums"><span id="statIdx">0</span>/<span id="statTotal">0</span> Â· æŒæ¡ <span id="statMaster">0</span> Â· å†çœ‹ <span id="statAgain">0</span></div>
            </div>
          </div>
        </article>
      </div>
    </section>

    <!-- è”ç³» -->
    <section id="contact" class="section">
      <div class="container">
        <h2 class="sec-title">è”ç³»</h2>
        <form id="contactForm" class="form" novalidate>
          <div class="row">
            <label>å§“å<input name="name" required placeholder="æ€ä¹ˆç§°å‘¼ä½ ï¼Ÿ" aria-required="true"></label>
            <label>é‚®ç®±<input name="email" type="email" required placeholder="name@domain.com" aria-required="true"></label>
          </div>
          <label>ç•™è¨€<textarea name="message" rows="4" required placeholder="åˆä½œ/å»ºè®®/è¯•ç‚¹ç”³è¯·" aria-required="true"></textarea></label>
          <button class="btn" type="submit">å‘é€ï¼ˆæœ¬åœ°æ¼”ç¤ºï¼‰</button>
          <button class="btn ghost" id="copyWeChat" type="button" data-wx="Kilimanjaro_-">å¤åˆ¶å¾®ä¿¡å·ï¼ˆKilimanjaro_-ï¼‰</button>
          <p id="formMsg" class="form-msg" role="status" aria-live="polite"></p>
        </form>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <small>Â© <span id="year"></span> è®¤çŸ¥æå‡. All rights reserved.</small>
    </div>
  </footer>

  <!-- ====== è„šæœ¬ï¼ˆåŸ script.js å†…åµŒï¼‰ ====== -->
  <script>
  // å¹´ä»½ & æ›´æ–°æ—¶é—´ & ä¸»é¢˜
  document.getElementById('year').textContent = new Date().getFullYear();
  document.getElementById('lastUpdated').textContent = new Date().toLocaleDateString();
  const root = document.documentElement;
  document.getElementById('themeToggle')?.addEventListener('click',()=>root.classList.toggle('light'));

  // æ•°æ®
  const resources = [
    { id:'res1', type:'book',    title:'åˆ»æ„ç»ƒä¹ ',             tags:['æŠ€èƒ½æå‡','å…ƒè®¤çŸ¥'], minutes:120, done:false, fav:false },
    { id:'res2', type:'book',    title:'æ€è€ƒï¼Œå¿«ä¸æ…¢',         tags:['è®¤çŸ¥åå·®','ç³»ç»Ÿæ€ç»´'], minutes:90,  done:false, fav:false },
    { id:'res3', type:'book',    title:'æ·±åº¦å·¥ä½œ',             tags:['ä¸“æ³¨åŠ›','æ•ˆç‡'],     minutes:100, done:false, fav:false },
    { id:'res4', type:'article', title:'å¦‚ä½•å»ºç«‹é•¿æœŸå­¦ä¹ ä¹ æƒ¯', tags:['ä¹ æƒ¯å…»æˆ'],          minutes:8,   done:false, fav:false },
    { id:'res5', type:'article', title:'å­¦ä¹ ä¸­çš„å…ƒè®¤çŸ¥æŠ€å·§',   tags:['å…ƒè®¤çŸ¥','ç­–ç•¥'],     minutes:6,   done:false, fav:false },
    { id:'res6', type:'video',   title:'ç•ªèŒ„å·¥ä½œæ³•å…¥é—¨è®²è§£',   tags:['æ—¶é—´ç®¡ç†'],          minutes:15,  done:false, fav:false },
    { id:'res7', type:'video',   title:'å¿«é€Ÿé˜…è¯»ä¸ä¿¡æ¯ç­›é€‰',   tags:['é˜…è¯»','æ•ˆç‡'],       minutes:12,  done:false, fav:false },
    { id:'res8', type:'course',  title:'è®¤çŸ¥ç§‘å­¦åŸºç¡€ï¼ˆèŠ‚é€‰ï¼‰', tags:['è®¤çŸ¥ç§‘å­¦','æ–¹æ³•'],   minutes:45,  done:false, fav:false },
  ];
  const quiz = [
    { id:'q1', stem:'å…ƒè®¤çŸ¥çš„å…³é”®ç­–ç•¥æ˜¯ï¼Ÿ', options:['ç›‘æ§ä¸è°ƒèŠ‚','è¢«åŠ¨é˜…è¯»','æ­»è®°ç¡¬èƒŒ','å¤šä»»åŠ¡'], answer:0, tips:'è¯•ç€åœ¨å­¦ä¹ ä¸­è‡ªé—®â€œæˆ‘ç†è§£äº†å—ï¼Ÿä¸‹ä¸€æ­¥æ˜¯ï¼Ÿâ€' },
    { id:'q2', stem:'æé«˜ä¸“æ³¨æ›´æœ‰æ•ˆçš„æ–¹æ³•æ˜¯ï¼Ÿ', options:['é•¿æ—¶é—´è‹¦æ’‘','ç•ªèŒ„é’Ÿ+ä¼‘æ¯','åŒæ—¶å¼€å¾ˆå¤šçª—å£','è¾¹å­¦è¾¹åˆ·æ¶ˆæ¯'], answer:1, tips:'25+5 ç•ªèŒ„ï¼Œæé«˜å®Œæˆæ¦‚ç‡' },
    { id:'q3', stem:'å½¢æˆé•¿æœŸä¹ æƒ¯çš„è¦ç‚¹ï¼Ÿ', options:['ç›®æ ‡è¶Šå¤§è¶Šå¥½','æ¯å¤©ä¸€ç‚¹ç‚¹ä¸”å¯æŒç»­','æˆæœæ‰æ˜¯åŠ¨åŠ›','ä¸€å£åƒæˆèƒ–å­'], answer:1, tips:'æŠŠç›®æ ‡åˆ‡åˆ°â€œæœ€ä½å¯è€»æ ‡å‡†â€' },
  ];
  const deck = [
    { front:'ä»€ä¹ˆæ˜¯å…ƒè®¤çŸ¥ï¼Ÿ',   back:'çŸ¥é“è‡ªå·±å¦‚ä½•å­¦ï¼šè®¡åˆ’-ç›‘æ§-è°ƒèŠ‚ã€‚' },
    { front:'æ·±åº¦å·¥ä½œå…³é”®ï¼Ÿ',   back:'è¿œç¦»å¹²æ‰°ï¼Œå—çŠ¶æ—¶é—´ï¼Œæ¸…æ™°ç›®æ ‡ã€‚' },
    { front:'æ£€ç´¢ç»ƒä¹ è¦ç‚¹ï¼Ÿ',   back:'åˆä¸Šä¹¦å›å¿†è¦ç‚¹ï¼Œè€Œä¸æ˜¯é‡å¤é˜…è¯»ã€‚' },
  ];

  // å­˜å‚¨
  const KEY_PLAN='mvp_plan_v1', KEY_STREAK='mvp_streak_v1';
  const store={getPlan:()=>JSON.parse(localStorage.getItem(KEY_PLAN)||'[]'),setPlan:x=>localStorage.setItem(KEY_PLAN,JSON.stringify(x)),getStreak:()=>Number(localStorage.getItem(KEY_STREAK)||0),setStreak:n=>localStorage.setItem(KEY_STREAK,String(n))};

  // èµ„æºæ¸²æŸ“
  const resList=document.getElementById('resList'), filterType=document.getElementById('filterType'), searchInput=document.getElementById('searchInput');
  function renderResources(){
    if(!resList) return;
    const type=filterType.value, kw=(searchInput.value||'').trim().toLowerCase();
    resList.innerHTML='';
    resources.filter(r=>{
      const okType=type==='all'||r.type===type;
      const okKw=!kw||r.title.toLowerCase().includes(kw)||r.tags.join(',').toLowerCase().includes(kw);
      return okType&&okKw;
    }).forEach(r=>{
      const el=document.createElement('article'); el.className='card';
      el.innerHTML=`
        <div class="res-title">${r.title}</div>
        <div class="res-tags">#${r.type} Â· ${r.tags.join(' / ')} Â· ${r.minutes}åˆ†é’Ÿ</div>
        <div class="res-actions">
          <button class="btn" data-add="${r.id}">åŠ å…¥è®¡åˆ’</button>
          <button class="btn ghost" data-done="${r.id}">${r.done?'å·²å®Œæˆ':'æ ‡è®°å®Œæˆ'}</button>
          <button class="btn ghost" data-fav="${r.id}">${r.fav?'â˜… å·²æ”¶è—':'â˜† æ”¶è—'}</button>
        </div>`;
      resList.appendChild(el);
    });
  }
  const debounce=(fn,wait=200)=>{let t;return(...a)=>{clearTimeout(t);t=setTimeout(()=>fn(...a),wait)}};
  filterType?.addEventListener('change',renderResources);
  searchInput?.addEventListener('input',debounce(renderResources,200));
  resList?.addEventListener('click',e=>{
    const t=e.target; if(!(t instanceof HTMLElement)) return;
    const add=t.dataset.add,done=t.dataset.done,fav=t.dataset.fav;
    if(add) addToPlan(add);
    if(done){ const r=resources.find(x=>x.id===done); if(r){r.done=!r.done; if(r.done) tickStreakToday();} renderResources(); }
    if(fav){ const r=resources.find(x=>x.id===fav); if(r){r.fav=!r.fav;} renderResources(); }
  });

  // è®¡åˆ’
  const planList=document.getElementById('planList'), planFill=document.getElementById('planFill'), planDone=document.getElementById('planDone'), planTotal=document.getElementById('planTotal'), streakEl=document.getElementById('streak');
  function addToPlan(id){
    const plan=store.getPlan();
    if(plan.length>=3) return alert('è®¡åˆ’æœ€å¤š 3 é¡¹');
    if(plan.some(x=>x.id===id)) return alert('å·²åœ¨è®¡åˆ’ä¸­');
    plan.push({id,done:false}); store.setPlan(plan); renderPlan();
  }
  function renderPlan(){
    if(!planList) return;
    const plan=store.getPlan(); planList.innerHTML='';
    plan.forEach((p,i)=>{ const r=resources.find(x=>x.id===p.id); if(!r) return;
      const li=document.createElement('li'); li.className='plan-item';
      li.innerHTML=`<div><div>${r.title}</div><div class="badge">#${r.type} Â· ${r.minutes}åˆ†é’Ÿ</div></div>
        <div class="res-actions"><button class="btn ghost" data-pdone="${i}">${p.done?'å·²å®Œæˆ':'å®Œæˆ'}</button><button class="btn ghost" data-del="${i}">ç§»é™¤</button></div>`;
      planList.appendChild(li);
    });
    const total=plan.length, done=plan.filter(x=>x.done).length;
    planTotal.textContent=total; planDone.textContent=done; planFill.style.width=total?`${Math.round(done/total*100)}%`:'0%';
    streakEl.textContent=store.getStreak();
  }
  planList?.addEventListener('click',e=>{
    const t=e.target; if(!(t instanceof HTMLElement)) return;
    const di=t.dataset.del, pd=t.dataset.pdone; const plan=store.getPlan();
    if(typeof di!=='undefined'){ plan.splice(Number(di),1); store.setPlan(plan); renderPlan(); }
    if(typeof pd!=='undefined'){ const i=Number(pd); plan[i].done=!plan[i].done; store.setPlan(plan); if(plan[i].done) tickStreakToday(); renderPlan(); }
  });
  function tickStreakToday(){ store.setStreak(store.getStreak()+1); }

  // æµ‹è¯•
  const quizForm=document.getElementById('quizForm'), quizResult=document.getElementById('quizResult');
  function renderQuiz(){
    if(!quizForm) return;
    quizForm.innerHTML=quiz.map((q,i)=>`
      <div class="q">
        <h4>${i+1}. ${q.stem}</h4>
        ${q.options.map((opt,idx)=>`<label><input type="radio" name="${q.id}" value="${idx}" ${idx===0?'checked':''}> ${opt}</label>`).join('')}
      </div>`).join('');
  }
  document.getElementById('submitQuiz')?.addEventListener('click',()=>{
    const data=new FormData(quizForm); let score=0, tips=[];
    quiz.forEach((q,i)=>{ const v=data.get(q.id); if(Number(v)===q.answer) score++; else tips.push(`Q${i+1}ï¼š${q.tips}`); });
    const rec=(score<=1?'å¦‚ä½•å»ºç«‹é•¿æœŸå­¦ä¹ ä¹ æƒ¯':(score===2?'å­¦ä¹ ä¸­çš„å…ƒè®¤çŸ¥æŠ€å·§':'æ·±åº¦å·¥ä½œ'));
    quizResult.hidden=false;
    quizResult.innerHTML=`
      <p>å¾—åˆ†ï¼š<b>${score}/${quiz.length}</b></p>
      ${tips.length? `<ul>${tips.map(t=>`<li>${t}</li>`).join('')}</ul>` : '<p>ä¸é”™ï¼ç»§ç»­ä¿æŒï½</p>'}
      <button class="btn" id="btnRec">ä¸€é”®åŠ å…¥æ¨èèµ„æºï¼ˆ${rec}ï¼‰</button>`;
    document.getElementById('btnRec').onclick=()=>quickAddFromTitle(rec);
  });

  // æ•™ç»ƒï¼ˆè§„åˆ™ï¼‰
  const rules=[
    { key:/æ‹–å»¶|ä¸æƒ³å¼€å§‹|è®¡åˆ’å¤ªå¤§/, tips:['æŠŠä»»åŠ¡åˆ‡æˆ25åˆ†é’Ÿç•ªèŒ„+5åˆ†é’Ÿä¼‘æ¯ï¼Œå…ˆåšç¬¬ä¸€ä¸ªç•ªèŒ„ã€‚','è®¾â€œæœ€ä½å¯è€»ç›®æ ‡â€ï¼šåªçœ‹10é¡µ/åªåš1é¢˜ã€‚'] },
    { key:/è®°ä¸ä½|èƒŒä¸ä¸‹æ¥|é—å¿˜/, tips:['ç”¨æ£€ç´¢ç»ƒä¹ ä»£æ›¿é‡è¯»ï¼šåˆä¸Šä¹¦å†™3ä¸ªå…³é”®ç‚¹ã€‚','å®‰æ’ 1-3-7 æ—¥å¤ä¹ èŠ‚å¥ï¼Œå¤ä¹ åªçœ‹è‡ªå·±å†™çš„æçº²ã€‚'] },
    { key:/ç†è§£éš¾|çœ‹ä¸æ‡‚|æŠ½è±¡/, tips:['æ‰¾å…·ä½“ä¾‹å­ï¼šæŠŠæ¦‚å¿µåº”ç”¨åˆ°ä½ çš„åœºæ™¯å†™ä¸€æ®µæ¡ˆä¾‹ã€‚','æ•™ä¼šåˆ«äººï¼šç”¨ä¸‰å¥è¯è®²ç»™â€œæ–°æ‰‹è‡ªå·±â€ã€‚'] },
    { key:/åˆ†å¿ƒ|æ³¨æ„åŠ›|åˆ·æ‰‹æœº/, tips:['æ¸…ç©ºæ¡Œé¢+å…¨å±+å…³é€šçŸ¥ï¼›è®¾25åˆ†é’Ÿå…æ‰“æ‰°ã€‚','å¼€å¤´å†™ä¸‹â€œè¿™25åˆ†é’Ÿæˆ‘åªåšï¼šXâ€ã€‚'] },
  ];
  document.getElementById('coachBtn')?.addEventListener('click',()=>{
    const out=document.getElementById('coachOut'); const val=(document.getElementById('coachInput').value||'').trim();
    if(!val){ out.textContent='å…ˆæè¿°ä½ çš„é—®é¢˜å“¦ï½'; return; }
    for(const r of rules){ if(r.key.test(val)){
      out.innerHTML='<ul>'+r.tips.map(t=>`<li>${t}</li>`).join('')+'</ul>';
      const btn=document.createElement('button'); btn.className='btn'; btn.textContent='åŠ å…¥æ¨èèµ„æºï¼ˆåˆ»æ„ç»ƒä¹ ï¼‰';
      btn.onclick=()=>quickAddFromTitle('åˆ»æ„ç»ƒä¹ '); out.appendChild(btn); return; } }
    out.textContent='å»ºè®®ï¼šæŠŠç›®æ ‡åˆ‡å°ã€è®¾å®šæ—¶é—´å—ã€åšæ£€ç´¢ç»ƒä¹ ï¼Œå¹¶åœ¨24å°æ—¶å†…åšä¸€æ¬¡å¤ä¹ ã€‚';
  });

  // æŠ½ç‰Œ
  let idx=0, mastered=0, again=0;
  const flash=document.getElementById('flashcard'), front=document.getElementById('cardFront'), back=document.getElementById('cardBack');
  const barFill=document.getElementById('barFill'), statIdx=document.getElementById('statIdx'), statTotal=document.getElementById('statTotal'), statMaster=document.getElementById('statMaster'), statAgain=document.getElementById('statAgain');
  function loadCard(i){ const c=deck[i]; if(!c) return; front.textContent=c.front; back.textContent=c.back; flash.classList.remove('flipped'); statIdx.textContent=i+1; statTotal.textContent=deck.length; barFill.style.width=`${Math.round((i/deck.length)*100)}%`;
  }
  flash?.addEventListener('click',()=>flash.classList.toggle('flipped'));
  document.getElementById('btnShuffle')?.addEventListener('click',()=>{ deck.sort(()=>Math.random()-0.5); idx=0; mastered=again=0; updateStats(); loadCard(idx); });
  document.getElementById('btnAgain')?.addEventListener('click',()=>{ again++; nextCard(); });
  document.getElementById('btnMaster')?.addEventListener('click',()=>{ mastered++; nextCard(); });
  function nextCard(){ idx=(idx+1)%deck.length; updateStats(); loadCard(idx); }
  function updateStats(){ statMaster.textContent=mastered; statAgain.textContent=again; }
  document.addEventListener('keydown',e=>{ if(!flash) return; if(e.code==='Space'){ e.preventDefault(); flash.classList.toggle('flipped'); } if(e.key==='ArrowLeft'){ again++; nextCard(); } if(e.key==='ArrowRight'){ mastered++; nextCard(); } });

  // é—­ç¯è¾…åŠ©
  function quickAddFromTitle(title){ const r=resources.find(x=>x.title.includes(title)); if(r){ addToPlan(r.id); alert(`å·²æ·»åŠ åˆ°è®¡åˆ’ï¼š${r.title}`); } else { alert('æœªæ‰¾åˆ°åŒ¹é…èµ„æºï¼Œå¯æ‰‹åŠ¨åœ¨èµ„æºåŒºæ·»åŠ '); } }

  // è”ç³»
  document.getElementById('copyWeChat')?.addEventListener('click', async ()=>{
    const wx = 'Kilimanjaro_-'; try{ await navigator.clipboard.writeText(wx); alert('å·²å¤åˆ¶å¾®ä¿¡å·ï¼š'+wx); }catch{ alert('è¯·æ‰‹åŠ¨æ·»åŠ å¾®ä¿¡ï¼š'+wx); }
  });
  document.getElementById('contactForm')?.addEventListener('submit',(e)=>{ e.preventDefault(); document.getElementById('formMsg').textContent='å·²æ”¶åˆ°ï¼ˆæ¼”ç¤ºç‰ˆä¸å‘é€ï¼‰'; e.target.reset(); });

  // å¯åŠ¨
  renderResources(); renderPlan(); renderQuiz(); loadCard(0);
  </script>
</body>
</html>